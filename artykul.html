<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEB SPACE STATION</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@200;400;600;800&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <canvas id="starfield"></canvas>
    
    <nav>
        <a href="index.html" class="nav-logo">Web Space Station</a>
        <div class="nav-links">
            <a href="index.html#meldunki">Meldunki</a>
            <a href="index.html#popularne">Nauka</a>
            <a href="index.html#tech">Technologia</a>
            <a href="index.html#status">Live</a>
        </div>
    </nav>

    <main class="article-container">
        <span id="art-tag" class="art-tag">Ładowanie danych...</span>
        <h1 id="art-tytul" style="font-family:'Rajdhani'; font-size: 3rem; margin: 10px 0;">---</h1>
        <img id="art-img" src="" class="full-art-img">
        <div id="art-tresc" class="article-body"></div>
    </main>

    <section style="padding: 0 5% 80px 5%;">
        <h2 style="font-family:'Rajdhani'; text-align:center; letter-spacing:5px; margin-bottom:40px; font-weight:200; text-transform:uppercase;">Więcej z tego działu</h2>
        <div id="related-slider" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto;"></div>
    </section>

    <script src="Artykuly/artykuly.js"></script>

    <script>
        // 1. Ładowanie treści artykułu
        const params = new URLSearchParams(window.location.search);
        const art = bazaArtykulow.find(a => a.id === parseInt(params.get('id')));

        if (art) {
            document.title = art.tytul + " | WEB SPACE STATION";
            document.getElementById('art-tag').innerText = art.tag;
            document.getElementById('art-tytul').innerText = art.tytul;
            document.getElementById('art-img').src = art.img;
            document.getElementById('art-tresc').innerHTML = art.tresc || `<p>${art.opis}</p>`;
            
            const grid = document.getElementById('related-slider');
            const podobne = bazaArtykulow
                .filter(item => item.kategoria === art.kategoria && item.id !== art.id)
                .slice(0, 3);

            grid.innerHTML = podobne.map(item => `
                <a href="artykul.html?id=${item.id}" class="art-card">
                    <div class="art-img" style="background-image: url('${item.img}');"></div>
                    <div class="art-content">
                        <span class="art-tag">${item.tag}</span>
                        <h3 class="art-title">${item.tytul}</h3>
                        <p class="art-desc">${item.opis}</p>
                    </div>
                </a>
            `).join('');
        }

        // 2. Logika gwiazd (Starfield)
        const canvas = document.getElementById('starfield');
        const ctx = canvas.getContext('2d');
        let width, height, stars = [];

        function initStars() {
            width = window.innerWidth; 
            height = window.innerHeight;
            canvas.width = width; 
            canvas.height = height;
            stars = [];
            for(let i=0; i<250; i++) {
                stars.push({
                    x: Math.random() * width, 
                    y: Math.random() * height, 
                    size: Math.random() * 1.2, 
                    speed: Math.random() * 0.3
                });
            }
        }

        function animateStars() {
            ctx.clearRect(0, 0, width, height); 
            ctx.fillStyle = "#fff";
            stars.forEach(s => { 
                ctx.beginPath(); 
                ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2); 
                ctx.fill(); 
                s.y -= s.speed; 
                if(s.y < 0) s.y = height; 
            });
            requestAnimationFrame(animateStars);
        }

        window.addEventListener('resize', initStars);
        initStars(); 
        animateStars();
    </script>
</body>
</html>