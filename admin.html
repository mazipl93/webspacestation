<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>TERMINAL ADMINA - WEB SPACE STATION</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&family=Exo+2:wght@400&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00f3ff; --magenta: #f0f; --bg: #0a0a0f; }
        body { background: var(--bg); color: #fff; font-family: 'Exo 2', sans-serif; padding: 40px; }
        .container { max-width: 900px; margin: 0 auto; background: rgba(22, 22, 30, 0.8); padding: 30px; border-radius: 15px; border: 1px solid var(--neon); box-shadow: 0 0 20px rgba(0, 243, 255, 0.1); }
        h1 { font-family: 'Rajdhani'; text-align: center; color: var(--neon); text-transform: uppercase; letter-spacing: 5px; margin-bottom: 30px; }
        label { display: block; margin-top: 20px; color: var(--magenta); font-weight: bold; font-size: 0.8rem; text-transform: uppercase; }
        select, textarea, input { 
            width: 100%; padding: 12px; margin-top: 8px; 
            background: #000; border: 1px solid #333; color: #fff; 
            border-radius: 5px; outline: none; transition: 0.3s;
        }
        input:focus, textarea:focus { border-color: var(--neon); box-shadow: 0 0 10px rgba(0, 243, 255, 0.2); }
        textarea { height: 350px; font-size: 1rem; line-height: 1.5; }
        .result-container { margin-top: 30px; display: none; }
        .result { 
            background: #000; padding: 20px; border: 1px dashed var(--magenta); 
            white-space: pre-wrap; font-family: monospace; 
            color: #adff2f; font-size: 0.85rem; overflow-x: auto;
        }
        button { 
            background: var(--neon); border: none; padding: 18px 40px; 
            margin-top: 25px; cursor: pointer; color: #000; font-weight: 800;
            width: 100%; text-transform: uppercase; letter-spacing: 2px;
            border-radius: 5px; transition: 0.3s;
        }
        button:hover { background: #fff; box-shadow: 0 0 30px var(--neon); }
        .hint { font-size: 0.75rem; color: #666; margin-top: 5px; }
        .copy-hint { color: var(--magenta); font-weight: bold; margin-bottom: 10px; display: block; }
    </style>
</head>
<body>

<div class="container">
    <h1>System Autopilot Content</h1>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <label>Kategoria docelowa</label>
            <select id="kat">
                <option value="meldunki">Meldunki</option>
                <option value="nauka">Nauka</option>
                <option value="tech">Technologia</option>
            </select>
        </div>
        <div>
            <label>Tag / Sygnatura</label>
            <input type="text" id="tag" placeholder="np. NASA, SPACEX, MARS">
        </div>
    </div>

    <label>Link do zdjęcia (URL)</label>
    <input type="text" id="img_url" placeholder="https://images.unsplash.com/...">

    <label>Tytuł Artykułu</label>
    <input type="text" id="art_title" placeholder="Wpisz główny tytuł">

    <label>Treść artykułu</label>
    <textarea id="raw_text" placeholder="Wklej tekst. Pamiętaj o pustej linii między źródłami na końcu!"></textarea>
    <p class="hint">Wskazówka: Zostaw pustą linię między akapitami i KAŻDYM źródłem (1., 2., 3.).</p>

    <button onclick="generateSuperCode()">Generuj Obiekt JavaScript</button>

    <div id="res-con" class="result-container">
        <span class="copy-hint">GOTOWE! Skopiuj poniższy kod i wklej do artykuly.js:</span>
        <div id="output" class="result"></div>
    </div>
</div>

<script>
    function generateSuperCode() {
        const text = document.getElementById('raw_text').value;
        const kategoria = document.getElementById('kat').value;
        const tag = document.getElementById('tag').value.toUpperCase() || "NEWS";
        const tytul = document.getElementById('art_title').value;
        const imgUrl = document.getElementById('img_url').value || 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=1200';
        
        if (!text || !tytul) {
            alert("BŁĄD: Musisz podać przynajmniej tytuł i treść!");
            return;
        }

        const uniqueID = Date.now();
        
        // Rozbijamy na bloki tekstu (akapit = podwójny enter)
        const paragraphs = text.split(/\n\s*\n/).filter(p => p.trim() !== "");
        let htmlContent = "";
        
        // Opis do karty (pierwszy akapit, czysty tekst)
        let shortDesc = paragraphs[0]
            .replace(/[„"”-]/g, '')
            .replace(/\n/g, ' ')
            .trim()
            .substring(0, 150) + "...";

        paragraphs.forEach((p) => {
            const cleanP = p.trim().replace(/\n/g, ' '); // Usuwamy zbędne entery wewnątrz bloku
            
            // Logika wykrywania typu treści:
            if (/^\d+\./.test(cleanP)) { 
                // 1. WYKRYWANIE NUMERACJI (Źródła i listy)
                htmlContent += `<p style="margin-bottom: 8px; border-left: 2px solid var(--magenta); padding-left: 12px; font-size: 0.9rem;">${cleanP}</p>`;
            } else if (cleanP.length < 65 && !cleanP.includes('<a')) {
                // 2. KRÓTKA LINIA = NAGŁÓWEK (ale nie jeśli ma link)
                htmlContent += `<h2>${cleanP}</h2>`;
            } else if (cleanP.startsWith('„') || cleanP.startsWith('"') || cleanP.startsWith('-')) {
                // 3. CYTATY / WYRÓŻNIENIA
                htmlContent += `<div class="highlight-box">${cleanP}</div>`;
            } else {
                // 4. ZWYKŁY AKAPIT
                htmlContent += `<p>${cleanP}</p>`;
            }
        });

        // Budujemy obiekt JavaScript
        const code = `{
        id: ${uniqueID},
        kategoria: '${kategoria}',
        tag: '${tag}',
        tytul: '${tytul.replace(/'/g, "&apos;")}',
        opis: '${shortDesc.replace(/'/g, "&apos;")}',
        tresc: \`${htmlContent.replace(/`/g, "\\`")}\`,
        img: '${imgUrl}',
        link: 'artykul.html?id=${uniqueID}'
    }`;

        const out = document.getElementById('output');
        const con = document.getElementById('res-con');
        
        out.textContent = code;
        con.style.display = 'block';
        
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }
</script>

</body>
</html>